# 기후위기 현황 및 관련 예산과 입법 분석
### [진행 기간]
- 2022.09.21 ~ 2022.09.30
### [맡은 역할 - 입법 파트] 
- 공공데이터 포털 국회사무처_의안 정보 **OPEN API**를 이용하여 2022년 9월 19일을 기준으로 국내 기후변화 의안 관련 데이터를 수집 및 전처리 진행 -> 국내 기후변화 관련 **의안수 변화 및 처리결과 현황** 분석 + 국내 기후변화 관련 **의안들의 기후변화 관련 키워드** 분석 
- 국내 기후변화 관련 보고서(제3차 국가 기후변화 적응대책) **PDF 파일**을 이용하여 데이터 수집 후 국내 기후변화 관련 **보고서의 기후변화 관련 키워드** 분석 
- 국내 기후변화 관련 법령 데이터를 워드 파일로 다운받은 뒤 각각의 문서들의 데이터를 **하나의 텍스트 파일**에 통합한 뒤 국내 기후변화 관련 **법령들의 기후변화 관련 키워드** 분석 
### [파일 목록]
- bill_count.py = 국내 기후변화 **의안수 선 그래프** 생성 파일
- bill_result.py = 국내 기후변화 **의안 처리결과 현황 막대&원그래프** 생성 파일
- bill_comparison.py = 2020~2022 국내 **기후변화&코로나 대응책 의안수 선 그래프** 생성 파일
- bill_keyword.py = 국내 기후변화 **의안 워드클라우드 및 단어 빈도수 TOP 15 그래프** 생성 파일
- report_keyword.py = 국내 기후변화 **보고서 워드클라우드 및 단어 빈도수 TOP 15 그래프** 생성 파일
- law_keyword.py = 국내 기후변화 **법령 워드클라우드 및 단어 빈도수 TOP 15 그래프** 생성 파일

### [사용한 Python Package]
- **WordCloud**를 이용한 워드클라우드 시각화
- **BeautifulSoup, requests**를 이용한 크롤링
- **re 정규표현식**을 이용한 데이터 전처리
- **pandas**를 이용한 데이터프레임 생성
- **plotly, matplotlib**를 이용한 그래프 시각화 
- **konply**를 이용한 한글 형태소 분석
- **PyPDF2**를 이용한 PDF 텍스트 추출
- **Counter**를 이용한 데이터 개수 파악
- **os**를 이용한 경로 이동
- **glob**을 이용한 특정 조건을 만족하는 파일 리스트 작성
- **numpy**를 이용한 이미지 파일 np.array 변환
- **PIL**을 이용한 이미지 파일 처리

부트캠프에서 10일간 진행했던 팀 프로젝트입니다. 처음에는 6명이서 진행한 프로젝트였지만 프로젝트 기간중 팀원의 불성실한 참여로 인하여 절반인 3명이 이탈하여 3명이서 진행하였고 인원이 감축된 만큼 원래 진행하려 했던 목표에서 일정 부분을 포기하기로 하고 예산 파트 1명, 의안 파트 2명으로 나누어 선정했던 주제인 기후위기 대응 예산 편성 및 의안 발의에 대한 조사 및 시각화를 진행하였습니다.

이번 프로젝트에서 의안 파트를 맞는 저는 여러 문제를 직면했는데
1. R에서 wordcloud2 패키지의 lettercloud 함수를 이용하여 데이터를 시각화하려 했으나 이미지 지정없이 wordcloud2 함수로 실행하면 잘 출력되는데 이미지를 지정해서 실행하거나 letterclod를 이용해서 시각화를 하면 지정한 글자나 이미지만 출력되고 데이터들은 출력이 되지 않아서 원인을 찾아보고 해결하려 했지만 
결국 R을 이용하는 해결방안을 찾지 못해 R을 이용하여 워드클라우드를 시각화하는 것을 포기하고 Pycharm에서 Python의 WordCloud 패키지와 파워포인트에 글자 크기를 슬라이드에 꽉 채울 수 있을 정도로 최대로 키워서 이를 캡처한 이미지 파일을 이용해 wordcloud를 생성하는 방식으로 대체함으로써 해결하였습니다.

2. 기후관련 의안들에서 추출한 명사들 중 특정조건을 만족하는 단어를 제외하여 단어들을 추출하고 싶어 출력값 리스트에서 remove 함수를 실행시켰더니 recursion error가 발생하여 새로운 리스트에 조건을 만족하는 단어를 append하는 방법으로 해결하였습니다.

3. 공공데이터포털에서 제공하는 <b>Encoding</b> 키는 웹페이지에서 URL로 입력할 때 사용하는 인증키였고 파이참과 같은 IDE를 사용하여 추출할 때 사용하고 <b>Decoding</b> 키를 이용해야했던 것을 Open API가 처음이었던 저는 이를 뒤늦게 깨달았고 심지어 그렇게 Decoding 키로 겨우 출력한 데이터는 원하는 한글이나 숫자로 나오지 않고 UTF-8로 인코딩된 데이터라 나와 당황했지만 이를 다시 한번 디코딩함으로써 마침내 원하는 데이터를 출력함으로써 해결하였습니다.

4. 공공데이터 포털 국회사무처_의안 정보 Open API 크롤링 결과와 의안정보시스템 홈페이지 DB 조회 결과가 서로 달라서 코드를 다시 짜서 18~20대와 21대 국회의원으로 케이스를 나누어 코드를 작성함으로써 해결하였습니다.
![캡처](https://user-images.githubusercontent.com/109947297/203540209-ba6bcf21-7af4-47d6-9400-efe4a96dcb36.PNG)

5. 원래는 기후변화 관련 법령데이터도 OPEN API를 이용하려 했으나 현행법령은 잘 출력되지만 무슨 이유인지 폐기된 법령에 대한 워드 파일은 다운로드가 가능한데 크롤링은 국가법령정보 공동활동에서 불가능하게 설정을 해놔서 결국 주제에 필요한 법령 데이터는 워드 파일로 다운받아 텍스트들을 메모장 파일에 붙여넣기한 뒤 원하는 데이터들을 추출함으로써 해결하였습니다.   

프로그래밍적으로도 그 외적으로도 다사다난했던 팀 프로젝트였지만 협업과 문제 해결 방식 그리고 데이터 크롤링에 있어서 많은 것들을 터득할 수 있었던 경험이었습니다.   

![코드1](https://user-images.githubusercontent.com/109947297/203533890-09bc1ba0-be93-4162-a001-728489e7ce8c.PNG)
![코드2](https://user-images.githubusercontent.com/109947297/203533896-1f7ce0e1-8db7-4a50-bad0-430e9cf08170.PNG)
![코드3](https://user-images.githubusercontent.com/109947297/203533897-17758a1b-5498-48c6-873c-e081eb442dea.PNG)
![코드4](https://user-images.githubusercontent.com/109947297/203533898-26605b9e-0a32-439a-95fd-d648015d0938.PNG)
![코드5](https://user-images.githubusercontent.com/109947297/203533902-164a1847-76c0-4c0d-874d-8df337cbadc7.PNG)
![코드6](https://user-images.githubusercontent.com/109947297/203533905-4dfe6e03-2ed4-47a3-8564-ec652d4ebd7e.PNG)
![코드7](https://user-images.githubusercontent.com/109947297/203533906-adc7263c-b05c-4314-b3b9-98ef0d3f98df.PNG)
![코드8](https://user-images.githubusercontent.com/109947297/203533908-3cc488ec-ba90-433a-81d8-ad8633844501.PNG)
![코드9](https://user-images.githubusercontent.com/109947297/203533914-3b3ac9a4-786d-4470-9405-f84e1b971dd2.PNG)
![코드10](https://user-images.githubusercontent.com/109947297/203533917-f19e3f98-27a3-4758-900f-8fe1ce9d021d.PNG)
![코드11](https://user-images.githubusercontent.com/109947297/203533918-b9a78cc4-bea9-4948-98ce-a2d59628dfaf.PNG)
